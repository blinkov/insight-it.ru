<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Insight IT</title><link>https://www.insight-it.ru/</link><description></description><atom:link href="https://www.insight-it.ru/tag/moi-mir/feed/index.xml" rel="self"></atom:link><lastBuildDate>Tue, 09 Oct 2012 13:12:00 +0400</lastBuildDate><item><title>High Performance Conference aka BitByte 2012</title><link>https://www.insight-it.ru//event/2012/high-performance-conference-aka-bitbyte-2012/</link><description>&lt;p&gt;Когда я наткнулся в RSS на объявление о данном мероприятии я сразу
отнесся к нему скептически: если бы "высокая производительность" &lt;em&gt;(high
performance)&lt;/em&gt; при разработке высоконагруженных интернет-проектов была
первым приоритетом, то самым распространенным языком программирования в
вебдеве был бы &lt;a href="/tag/c/"&gt;C&lt;/a&gt; или даже Ассемблер, а не &lt;a href="/tag/php/"&gt;PHP&lt;/a&gt;.
Но судя по заголовкам докладов речь все же была о &lt;a href="https://www.insight-it.ru/highload/"&gt;highload&lt;/a&gt;, так что в качестве эксперимента я решил съездить.&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;Дело было 6 октября в Москве. Сама HPC являлась частью некого фестиваля
BitByte. В двух других потоках, как я понял, говорили об HR и стартапах,
то есть в коридоре между залами была довольно забавная смесь из толпы
студентов и небольшого количества технарей и HRов. Хотя самый большой
зал почему-то был у HPC-секции. Организация у всего этого была очень
минималистичная, без бейджиков и обеда, хотя с интернет-трансляцией. А
вот слайды с докладов до сих пор не опубликовали...&lt;/p&gt;
&lt;p&gt;Формат мероприятия был довольно необычный: всего 5 докладов на секцию
примерно по часу. Два от &lt;strong&gt;Badoo&lt;/strong&gt; и по одному от&amp;nbsp;организаторов
(&lt;strong&gt;ITmozg&lt;/strong&gt;), &lt;strong&gt;Моего_Мира@mail.ru&lt;/strong&gt; и &lt;strong&gt;Фотостраны&lt;/strong&gt;. С одной стороны
"длинный" формат хорош тем, что докладчики могли не торопиться и было
масса времени на Q&amp;amp;A, но по факту тот же объем информации, что излагался
за час можно было бы запросто выдать и за стандартные 15-30 минут -
какими-то особыми деталями никто не радовал, а жаль.&amp;nbsp;Но обо всем
по-порядку.&lt;/p&gt;
&lt;h3 id="optimizatsiia-mongodb-dos-and-donts"&gt;Оптимизация MongoDB - DO's and DON'Ts&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Даниил Павлючков&lt;/strong&gt;&amp;ensp;&lt;em&gt;(ITmozg)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Вообще компания-организатор ITmozg - &lt;del&gt;просто HR-агенство в сфере
IT&lt;/del&gt;&amp;nbsp;специализированный рекрутинговый онлайн ресурс для IT и Телеком
сфер, которое ко всему прочему проводит мероприятия вроде этого. Их сайт
не отличается особой популярностью (и, как следствие, нагрузками) и
содержит помимо новостей и информации о мероприятиях, что-то типа
каталога вакансий и резюме. Он частично разработан докладчиком&amp;nbsp;с
использованием MongoDB. Так и родился этот доклад.&lt;/p&gt;
&lt;p&gt;Состоял он из обсуждения различных ходящих по Интернету слухов и статей
о &lt;a href="/tag/mongodb/"&gt;MongoDB&lt;/a&gt; и нескольких примеров о том, как базовый
функционал можно реализовать с использованием документ-ориентированного
подхода по сравнению с реляционным.&lt;/p&gt;
&lt;p&gt;Основной минус такого рода докладов в том, что слушатели обычно делятся
на две категории: если им актуальна данная тема, то довольно вероятно,
что они уже читали все то, о чем говорит докладчик, а если не
актуальна - то они тем более не слушают.&lt;/p&gt;
&lt;p&gt;Примерно по-этим же причинам я сам пока не выступаю на конференциях: о
клиентах по &lt;a href="https://www.insight-it.ru/consulting/"&gt;консультациям&lt;/a&gt; не культурно рассказывать, а из своих проектов в ситуацию сколько-либо серьезных нагрузок еще ни один не попал. А про все остальное и так можно почитать в Интернете...&lt;/p&gt;
&lt;h3 id="badoo-desktop-optimizatsiia-prilozheniia-na-million-iuzerov-onlain"&gt;Badoo Desktop: оптимизация приложения на миллион юзеров онлайн&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Сергей Аверин aka Xek&lt;/strong&gt;&amp;ensp;&lt;em&gt;(Badoo)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Про Badoo думаю у меня уже достаточно информации, чтобы написать
отдельную статью (если Вам интересно - дайте знать в комментариях), так
что в технические подробности вдаваться особо не буду. Скажу лишь, что у
них используется вполне стандартный стек технологий (&lt;a href="/tag/php/"&gt;PHP&lt;/a&gt; и
&lt;a href="/tag/handlersocket/"&gt;MySQL&lt;/a&gt;), но реализованный в своем особом стиле,
который мне даже сложно как-то конкретно охарактеризовать.&lt;/p&gt;
&lt;p&gt;Если кто не слышал, Badoo - довольно крупный международный сайт
знакомств (в Top200 сайтов мира по версии Alexa).&amp;nbsp;Сергей рассказывал об
их десктопном приложении, которое постоянно висит в трее, поддерживает
статус онлайн и доставляет уведомления. И, конечно, серверной части,
которая его обслуживает.&lt;/p&gt;
&lt;p&gt;Общий посыл доклада, с моей точки зрения, был следующий: при разработке
больших и сложных систем никому нельзя доверять, нужно самостоятельно
проверять все варианты и цифры и думать исключительно собственной
головой. Сложно не согласиться.&lt;/p&gt;
&lt;p&gt;Доклад пестрил разными историями, советами и примерами, что само по себе
очень здорово, но по мне так не хватало какой-то общей "сюжетной линии".
Из тех, что запомнились:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Они завели специальный режим для экстренных случаев, когда что-то
    сломалось или пик нагрузки - они могут сказать всем или части
    десктоп-приложений отправлять им данные реже, чем обычно. Жаль, для
    веб-сайтов это чуть менее применимо, но всегда полезно заранее
    подумать в этом направлении и составить план действий и список
    возможных мер по снижению нагрузки.&lt;/li&gt;
&lt;li&gt;Гоняясь за производительностью кода (внутри PHP), можно выиграть
    максимум десятки процентов. Чтобы добиться выигрыша
    производительности в десятки раз, нужно менять принцип того, как
    работает приложение.&lt;/li&gt;
&lt;li&gt;Не раз упоминались разного рода проблемы с таймаутами, но у меня не
    сложилось четкого впечатления, в чем были их причины и что было
    сделано для их устранения.&lt;/li&gt;
&lt;li&gt;В Badoo довольно либерально относятся к единственным точкам отказа
    &lt;em&gt;(single point of failure)&lt;/em&gt;, так что некоторые внутренние сервисы у
    них все же являются таковыми.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="push-uvedomlenie-i-obshchaia-arkhitektura-proekta-moi_mirmailru"&gt;Пуш-уведомление и общая архитектура проекта Мой_Мир@Mail.Ru&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Дмитрий Казаков&lt;/strong&gt;&amp;ensp;&lt;em&gt;(Mail.ru Group)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Если честно, я все же надеялся услышать хоть что-то стоящее на этом
докладе... Наверное в свете того, что я недавно довольно тесно
интересовался данной темой, что в итоге вылилось в серию статей
&lt;a href="https://www.insight-it.ru/interactive/"&gt;"Интерактивные сайты"&lt;/a&gt;. Но Mail.ru оказались в своем репертуаре: "у нас есть свои крутые технологии, они круче всех на свете,
но почему именно мы решили их создать и в чем их преимущества/отличия от
общеиспользуемых решений, мы не расскажем". В opensource тоже не
дождетесь. Исключение из этого правила пока лишь одно -&amp;nbsp;&lt;strong&gt;Tarantool&lt;/strong&gt;
(СУБД, работающая в основном в памяти, чем-то напоминает
&lt;a href="/tag/redis/"&gt;Redis&lt;/a&gt;), но из-за такого их поведения на конференциях я и
к этому их opensource проекту подозрительно отношусь.&lt;/p&gt;
&lt;p&gt;Сам Мой Мир отдельной статьи явно не заслуживает, так что вкратце:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="/tag/perl/"&gt;Perl&lt;/a&gt; с модулями на &lt;a href="/tag/c/"&gt;C&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Хранение данных с использованием собственной технологии "Silver" и
    вышеупомянутого Tarantool&lt;/li&gt;
&lt;li&gt;Плюс немного &lt;a href="/tag/memcached/"&gt;memcached&lt;/a&gt;, а про самое главное -
    шину обмена сообщениями докладчик забыл&lt;/li&gt;
&lt;li&gt;Для взаимодействия между браузером и сервером используют CometD,
    видимо тот самый на странноватом Bayeux протоколе&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;И немного статистики:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;7.5 миллионов пользователей&lt;/li&gt;
&lt;li&gt;40 миллионов просмотров страниц в день&lt;/li&gt;
&lt;li&gt;283.5 миллиона показов в день (видимо, просто хитов включая статику)&lt;/li&gt;
&lt;li&gt;1 миллион новых друзей в день (февраль 2011)&lt;/li&gt;
&lt;li&gt;25 разработчиков&lt;/li&gt;
&lt;li&gt;300 фронтендов&lt;/li&gt;
&lt;li&gt;Под уведомления: 12 серверов с 16Гб памяти и 4+1 дисками&lt;/li&gt;
&lt;li&gt;10 миллионов уведомлений на сервер, при средней длине уведомления в
    116 байт&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="kak-slat-150m-pisem-kazhdyi-den"&gt;Как слать 150М писем каждый день&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Андрей Сас&lt;/strong&gt;&amp;ensp;&lt;em&gt;(Badoo)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Андрей по совместительству вел развлекательную программу от Badoo в
перерыве, так что доклад также по инерции прошел в
развлекательно-увесилительном формате. Про, собственно, основные вопросы
минимизации попадания в спам и прочих проблем в доставке почты
целеноправленно умолчали под предлогом, что это их конкурентное
преимущество.&lt;/p&gt;
&lt;p&gt;Из того, что было сказано:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Для отправки почты используется &lt;strong&gt;две очереди&lt;/strong&gt;: одна для генерации
    писем, другая для их отправки.&lt;/li&gt;
&lt;li&gt;Несколько удивил тот факт, что обе они реализованы &lt;strong&gt;просто на
    файлах&lt;/strong&gt;, как я понял с единственной мотивацией "так надежнее".&lt;/li&gt;
&lt;li&gt;Сама отправка через команду mail, вызывающую&amp;nbsp;&lt;strong&gt;ssmtp&lt;/strong&gt; (облегченный
    аналог sendmail), через собственные MTA.&lt;/li&gt;
&lt;li&gt;В качестве MTA используется проприетарный &lt;strong&gt;Communigate Pro&lt;/strong&gt;,
    который, по их мнению, быстрее и надежнее opensource альтернатив.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="arkhitektura-proekta-na-30m-polzovatelei"&gt;Архитектура проекта на 30М пользователей&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&amp;nbsp;Дмитрий Смирнов&lt;/strong&gt;&amp;ensp;&lt;em&gt;(Фотострана)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Фотострана - не имеющая никакого отношения к фото социальная сеть, в
Топ20 рунета по данным LiveInternet, но о которой никто не слышал.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Почти традиционный &lt;a href="/tag/lamp/"&gt;LAMP&lt;/a&gt; стек, за исключением того, что
    по историческим причинам &lt;a href="/tag/freebsd/"&gt;FreeBSD&lt;/a&gt; вместо
    &lt;a href="/tag/linux/"&gt;Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Мега-короткий цикл разработки - деплой новой версии каждый час (!),
    недельные спринты в Agile отдыхают&lt;/li&gt;
&lt;li&gt;Тоже написали свою альтернативу Redis, которая, судя по графикам,
    примерно на порядок его быстрее, но не собираются её опубликовывать&lt;/li&gt;
&lt;li&gt;Узкоспециализированные сервера - нет не только смешанных серверов
    вроде СУБД + сервер приложений, но и разные части проекта (анкеты,
    поиск, "питомцы" и т.п.) разнесены по разным машинам&lt;/li&gt;
&lt;li&gt;Собственная система отдачи статики с двухслойным кэшем и, как я
    понял, без использования CDN&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="zakliuchenie"&gt;Заключение&lt;/h3&gt;
&lt;p&gt;Для малобюджетного бесплатного мероприятия содержательность оказалась
очень даже неплоха. Думаю особенно полезно данное мероприятие оказалось
для присутствовавших там в большом количестве начинающих студентов,
которые пытались понять, интересна ли им тема веб-разработки в целом и
высоких нагрузок в частности или нет.&lt;/p&gt;
&lt;p&gt;По традиции напомню, что если Вы хотите оперативно узнавать о новых
статьях об&amp;nbsp;&lt;a href="https://www.insight-it.ru/highload/"&gt;архитектуре высоконагруженных интернет проектов&lt;/a&gt;, а также других материалах - рекомендую
&lt;a href="/feed/"&gt;подписаться на &lt;strong&gt;Insight IT&lt;/strong&gt; через RSS&lt;/a&gt;.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Иван Блинков</dc:creator><pubDate>Tue, 09 Oct 2012 13:12:00 +0400</pubDate><guid>tag:www.insight-it.ru,2012-10-09:event/2012/high-performance-conference-aka-bitbyte-2012/</guid><category>Badoo</category><category>BitByte</category><category>High Performance Conference</category><category>HPC</category><category>ITmozg</category><category>Mail.ru</category><category>конференция</category><category>мероприятия</category><category>Мой Мир</category><category>Фотострана</category></item></channel></rss>