<!DOCTYPE html>
<html lang=ru xmlns=http://www.w3.org/1999/xhtml xmlns:og=http://ogp.me/ns# xmlns:fb=https://www.facebook.com/2008/fbml><head><meta http-equiv=Content-Type content="text/html; charset=UTF-8"><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=msapplication-tap-highlight content=no><title>Архитектура Twitter</title><link href="//fonts.googleapis.com/css?family=Open+Sans&amp;subset=latin,cyrillic" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=PT+Sans&amp;subset=latin,cyrillic" rel=stylesheet type=text/css><link rel=stylesheet href=https://www.insight-it.ru/theme/css/main.css?5e55de6b><link rel=canonical href=https://www.insight-it.ru/highload/2008/arkhitektura-twitter/ ><meta property=og:url content=https://www.insight-it.ru/highload/2008/arkhitektura-twitter/ ><meta property=og:title content="Архитектура Twitter"><meta property=og:type content=article><meta name=description content="Twitter стартовал как побочный подпроект, но не смотря на это темпы его роста были впечатляющими: путь от 0 до ..."><meta property=og:description content="Twitter стартовал как побочный подпроект, но не смотря на это темпы его роста были впечатляющими: путь от 0 до ..."><meta name=keywords content="AWStats,Erlang,Google Analytics,Memcached,mongrel,Munin,MySQL,Nagios,Ruby on Rails,Solaris,Starling,Twitter,архитектура,архитектура Twitter"><meta name=author content="Иван Блинков"><meta property=og:site_name content="Insight IT"><meta property=og:locale content=ru_RU><link href=https://www.insight-it.ru/feed/index.xml type=application/rss+xml rel=alternate title="Insight IT RSS Feed"></head><body><header><div class=container><a href=# data-activates=nav-mobile class="button-collapse top-nav waves-effect waves-light circle"><i class=icon-menu></i></a></div><ul id=nav-mobile class="side-nav fixed"><li class=logo><a id=logo-container href=https://www.insight-it.ru/ class=brand-logo><h4>Insight IT</h4></a></li><li class=bold><a href=https://www.insight-it.ru/highload/ > Высокие нагрузки </a></li><li class=bold><a href=https://www.insight-it.ru/interactive/ > Интерактивные сайты </a></li><li class=no-padding><ul class="collapsible collapsible-accordion"><li class=bold><a class="collapsible-header waves-effect waves-red"> Рубрики </a><div class=collapsible-body><ul><li><a href=https://www.insight-it.ru/category/linux/ > Linux </a></li><li><a href=https://www.insight-it.ru/category/python/ > Python </a></li><li><a href=https://www.insight-it.ru/category/erlang/ > Erlang </a></li><li><a href=https://www.insight-it.ru/category/frontend/ > Frontend </a></li><li><a href=https://www.insight-it.ru/category/storage/ > Хранение данных </a></li><li><a href=https://www.insight-it.ru/category/theory/ > Теория </a></li><li><a href=https://www.insight-it.ru/category/event/ > Мероприятия </a></li><li><a href=https://www.insight-it.ru/category/misc/ > Разное </a></li><li><a href=https://www.insight-it.ru/category/index/ > Все рубрики </a></li></ul></div></li></ul></li><li class=no-padding><ul class="collapsible collapsible-accordion"><li class=bold><a class="collapsible-header waves-effect waves-red"> Страницы </a><div class=collapsible-body><ul><li><a href=https://www.insight-it.ru/blog/ > Блог </a></li><li><a href=https://www.insight-it.ru/about/ > О сайте </a></li><li><a href=https://www.insight-it.ru/author/ > Об авторе </a></li><li><a href=https://www.insight-it.ru/consulting/ > Консультации </a></li><li><a href=https://www.insight-it.ru/contact/ > Контакты </a></li><li><a href=https://www.insight-it.ru/resume/ > Резюме </a></li><li><a href=https://www.insight-it.ru/search/ > Поиск по сайту </a></li></ul></div></li></ul></li></ul></header><main><nav class=top-nav><div class=container><div class=nav-wrapper><ul id=nav-mobile class="right hide-on-med-and-down"><li class><a href=/blog/ >Блог</a></li><li class><a href=/about/ >О&nbsp;сайте</a></li><li class><a href=/author/ >Об&nbsp;авторе</a></li></ul><h1><a class=page-title> Архитектура Twitter </a></h1></div></div></nav><div class=container><div class=row><div class="col s12 m9 l10"><div class="materialdesign section scrollspy"><section id=content class=body><article class=entry-content><p><a href=https://www.insight-it.ru/goto/c2919313/ rel=nofollow target=_blank title=https://www.twitter.com>Twitter</a> стартовал как побочный подпроект, но не смотря на это темпы его роста были впечатляющими: путь от 0 до миллионов просмотров страниц занял всего несколько коротких месяцев. Ранние решения о проектировании системы неплохо справлялись с небольшими нагрузками, но они быстро таяли под напором огромного количества пользователей, желающих разослать весточки всем своим друзьям с ответом на простой вопрос: а чем ты занимаешься?</p><p>Поначалу все винили <a href=/tag/ror/ >Ruby on Rails</a> во всех проблемах с масштабированием, но Blaine Cook, главный архитектор Twitter, встал на его защиту:</p><blockquote><p>Основной для нас на самом деле является проблема горизонтального масштабирования, с этой точки зрения <a href=/tag/ror/ >Ruby on Rails</a> ничем не хуже других языков программирования или framework'ов: переход на "более быстрый" язык программирования дал бы нам 10-20% прирост производительности, в то время архитектурные преобразования, легко реализованные средствами <a href=/tag/ror/ >Ruby on Rails</a>, сделали Twitter быстрее на 10000%.</p></blockquote><p>Даже если <a href=/tag/ror/ >Ruby on Rails</a> оказался невиновен, как же тогда Twitter научился с его помощью рости до все больших и больших высот? </p><h3 id=istochniki-informatsii>Источники информации</h3><p><em>Этот текст является продолжением <a href=https://www.insight-it.ru/highload/ >серии переводов</a>, автор <a href=https://www.insight-it.ru/goto/9736f7f8/ rel=nofollow target=_blank title=http://highscalability.com/scaling-twitter-making-twitter-10000-percent-faster>оригинала</a> - Todd Hoff. На этот раз написать что-либо своими силами у меня не сложилось, все мысли ушли на другой пост, который я скоро опубликую, а перевод этот получился несколько менее строгим, чем обычно, но я думаю ничего страшного.</em></p><ul><li><a href=https://www.insight-it.ru/goto/1a76cc37/ rel=nofollow target=_blank title="http://video.google.com/videoplay?docid=-7846959339830379167">Scaling Twitter Video</a> от Blaine Cook.</li><li><a href=https://www.insight-it.ru/goto/a004222e/ rel=nofollow target=_blank title=http://www.slideshare.net/Blaine/scaling-twitter>Scaling Twitter Slides</a></li><li><a href=https://www.insight-it.ru/goto/7541c4c6/ rel=nofollow target=_blank title=http://talklikeaduck.denhaven2.com/articles/2007/06/22/good-news>Good News</a> блог пост от Rick Denatale</li><li><a href=https://www.insight-it.ru/goto/96735c2c/ rel=nofollow target=_blank title=http://pragmati.st/2007/5/20/scaling-twitter>Scaling Twitter</a> блог пост от Patrick Joyce</li><li><a href=https://www.insight-it.ru/goto/7267856d/ rel=nofollow target=_blank title=http://readwritetalk.com/2007/09/05/biz-stone-co-founder-twitter/ >Twitter API Traffic is 10x Twitter&rsquo;s Site</a></li><li><a href=https://www.insight-it.ru/goto/5eb63819/ rel=nofollow target=_blank title=http://www.slideshare.net/britt/a-small-talk-on-getting-big-113066>A Small Talk on Getting Big. Scaling a Rails App &amp; all that Jazz</a></li></ul><h3 id=platforma>Платформа</h3><ul><li><a href=/tag/ruby-on-rails/ >Ruby on Rails</a></li><li><a href=/tag/erlang/ >Erlang</a></li><li><a href=/tag/mysql/ >MySQL</a></li><li><a href=/tag/mongrel/ >Mongrel</a></li><li><a href=/tag/munin/ >Munin</a></li><li><a href=/tag/nagios/ >Nagios</a></li><li><a href=/tag/google-analytics/ >Google Analytics</a></li><li><a href=/tag/awstats/ >AWStats</a></li><li><a href=/tag/memcached/ >Memcached</a></li></ul><h3 id=statistika>Статистика</h3><ul><li>Более 350000 пользователей. Точная цифра, как обычно, держится в секрете.</li><li>Около 600 запросов в секунду.</li><li>В среднем система поддерживает 200-300 соединений в секунду. Максимум обычно достигается при значении 800.</li><li>MySQL обрабатывает примерно 2400 запросов в секунду.</li><li>180 экземпляров приложений на Rails, использующих Mongrel как веб-сервер.</li><li>1 MySQL сервер (одна большая машина с 8 ядрами) и 1 slave, используемый лишь для статистики и отчетов.</li><li>30+ процессов для выполнения произвольных работ.</li><li>8 Sun X4100</li><li>Обработка запроса обычно занимает у Rails 200 миллисекунд.</li><li>В среднем ответ на запрос к базе данных занимает 50-100 миллисекунд.</li><li>Более 16 GB выделено под <a href=/tag/memcached/ >memcached</a>.</li></ul><h3 id=arkhitektura>Архитектура</h3><ul><li>Проект столкнулся с массой проблем, связанных с масштабируемостью. Маленькая птичка частенько давала сбои.</li><li>Изначально не было реализовано никаких форм мониторинга, графиков или статистики, это очень затрудняло обнаружение м решение возникающих проблем. Впоследствии были внедрены <a href=/tag/munin/ >Munin</a> и <a href=/tag/nagios/ >Nagios</a>. Разработчики столкнулись с некоторыми трудностями при использовании этих продуктов в <a href=/tag/solaris/ >Solaris</a>. Помимо этого был использован сервис Google Analytics, но от него обычно мало толку, особенно когда страницы даже не загружаются.</li><li><p>Активное использование кэширования средствами <a href=/tag/memcached/ >memcached</a>:</p><ul><li>Например, если подсчет количества чего-либо выполняется медленно, намного эффективнее один раз запомнить результат в <a href=/tag/memcached/ >memcached</a>, чем каждый раз считать его заново.</li><li>Получение информации о статусе своих друзей - непростая задача. Вместо использования запросов информация о статусе друзей обновляется в кэше. База данных совсем не используется. Такой подход позволяет получить предсказуемое время отклика (ограниченное сверху примерно 20 миллисекундами).</li><li>Объекты ActiveRecord настолько велики, что кэширование их нецелесообразно. Критичные атрибуты хранятся в хэше, а остальная их часть подвергается "ленивой загрузке" в момент запроса на доступ.</li><li>90% запросов являются запросами к API. Таким образом кэширование страниц или их фрагментов становится бессмысленным, зато никто не мешает им кэшировать сами API запросы.</li></ul></li><li><p>Внутренняя организация работы с сообщениями:</p><ul><li>Сообщения очень активно используются: производители генерируют сообщения, они образуются в очереди, а затем распространяются по потребителем.</li><li>Основная функция Twitter заключается в реализации своеобразного моста между различными форматами электронных сообщений (SMS, электронная почта, сервисы мгновенного обмена сообщениями и так далее).</li><li>Чтобы инвалидировать в кэше информацию можно просто отправить внутреннее сообщение, зачем выполнять все действия синхронно?</li><li>Изначально этот механизм основывался на DRb (distributed Ruby) - библиотека, позволяющая отправлять и принимать сообщения сообщения между удаленными Ruby-объектами по TCP/IP. Но она была несколько странноватой, да и являлось потенциально слабым местом с точки зрения стабильности.</li><li>Со временем сервис перевели на Rinda, представляющую собой набор общих для всей системы очередей. Но и у нее были недостатки: все очереди были постоянными, а данные терялись при сбоях.</li><li>Следующей попыткой был Erlang. Но однажды возникла проблема: каким образом сломавшийся сервер может продолжать работать, но при этом в очереди откуда-то возникли целых 20000 ожидающих пользователей? Разработчики не знали. На лицо явный недостаток документации...</li><li>В конце концов решение было разработано своими силами: Twitter выпустил <a href=/tag/starling/ >Starling</a>, распределенный легковесный сервер очередей, написанный на Ruby и поддерживающий протокол memcache. Сейчас серверная часть Twitter управляется именно им.</li><li>Распределенные очереди позволяют переживать сбои путем записи их на диск в критических ситуациях. Другие крупные интернет-проекты также часто пользуются таким подходом.</li></ul></li><li>Работа с SMS осуществляется с помощью сторонних сервисов и предоставляемых ими шлюзов. Достаточно дорогое удовольствие.</li><li>Развертывание:<ul><li>Просто запускаются дополнительные сервера с mongrel, более элегантного решения пока нет.</li><li>Все внутренние ошибки выдаются пользователям, если обслуживающий их mongrel сервер на данный момент заменяется.</li><li>Все сервера останавливаются одновременно. Отключение их по одному по определенным причинам не используется.</li></ul></li><li>Неправильное использование сервиса:<ul><li>Много времени сервис был не доступен, так как люди проходились специальными программами по сайту с целью добавить всех кто попадался под руку в друзья. 9000 друзей за 24 часа. Это просто-напросто останавливало работу сайта.</li><li>Были разработаны средства для своевременного обнаружения таких ситуаций.</li><li>Будте беспощадными, таких пользователей нужно просто удалять.</li></ul></li><li>Сегментирование:<ul><li>Пока оно только в планах, сейчас оно не используется.</li><li>В будущем оно будет основываться на времени, а не на пользователях, так как запросы обычно очень локальны по времени.</li><li>Сегментирование будет не так просто реализовать благодаря автоматическому запоминанию результатов выполнения функций для последующего повторного их использования. Никто не даст гарантии, что операции "только для чтения" на самом деле будут таковыми являться. Запись в slave, работающий в режиме read-only, - не самая лучшая идея.</li></ul></li><li>API Twitter генерирует в 10 раз больше трафика, чем сам сайт.<ul><li>Их API - самая важная вещь из всех, что они разработали.</li><li>Простота сервиса позволила разработчикам строить свои приложения поверх инфраструктуры Twitter, привнося все новые и новые идеи. Например, Twitterrific - красивый способ использовать Twitter в небольшой команде.</li></ul></li><li>Мониторинг используется для остановки слишком больших процессов.</li></ul><h3 id=podvodim-itogi>Подводим итоги</h3><ul><li>Общайтесь со своим сообществом. Не прячьтесь и не пытайтесь решить абсолютно все проблемы самостоятельно. Много отличных людей будут готовы помочь, достаточно лишь попросить.</li><li>Рассматривайте вашу стратегию масштабирования как бизнес-план. Соберите советы помощников для того чтобы облегчить для себя принятие решений.</li><li>Стройте свой проект сами. Twitter потратил много времени, пытаясь приспособить готовые решения других людей, которые казалось бы должны работать, но это оказалось не совсем так. Лучше построить какие-то вещи самостоятельно, чтобы иметь высокую степень контроля над ситуацией и иметь возможность привносить новые возможности как только они понадобились.</li><li>Ставьте перед своими пользователями разумные ограничения. На обычных пользователей это не повлияет, но когда кому-нибудь взбредет в голову попытаться сломать систему (а такой человек рано или поздно найдется) - они сыграют свою роль и спасут работоспособность системы.</li><li>Не делайте базу данных центральным узким местом системы, врядли Ваше приложение на самом деле требует гигантских операций по объединению данных из нескольких таблиц. Используйте кэширование, или проявите свою смекалку для поиска альтернативных способов достижения того же результата.</li><li>Предусмотрите возможность сегментирования с самого начала, тогда перед Вами всегда будут открыты пути для дальнейшего масштабирования.</li><li>Очень важно вовремя осознать, что сайт начинает работать медленно. Сразу стоит задуматься о системе отчетов для отслеживания потенциальных проблем.</li><li>Оптимизируйте базу данных:<ul><li>Индексируйте все таблицы, Rails не будет делать это за Вас.</li><li>Используйте "explain" для анализа выполнения запросов. Результаты могут не совпадать с Вашими ожиданиями.</li><li>Денормализуйте данные. Один только этот совет порой может спасти ситуацию. Для примера, в Twitter хранят все ID друзей каждого пользователя вместе, это позволило избежать многих ресурсоемких запросов.</li><li>Избегайте комплексного объединения данных из нескольких таблиц.</li><li>Избегайте сканирования больших наборов данных.</li></ul></li><li>Кэшируйте все, что только можно.</li><li>Тестируйте все максимально тщательно:<ul><li>Когда Вы развертываете приложение, Вы должно быть уверены, что оно будет работать корректно.</li><li>Они используют полный набор средств для тестирования. Таким образом, когда произошла неполадка в кэшировании, они узнали о ней еще до того как она на самом деле произошла.</li></ul></li><li>Длительно функционирующие процессы стоит оформить в виде daemon'ов.</li><li>Используйте уведомления об исключительных ситуациях в совокупности с ведением логов, это необходимо для своевременного реагирования на них.</li><li>Не делайте глупостей!<ul><li>Масштаб проект несколько меняет понятие "глупость".</li><li>Пытаться загрузить 3000 друзей в память одновременно может заставить сервер временно перестать функционировать, хотя когда друзей было всего 4 - этот механизм прекрасно работал.</li></ul></li><li>Большая часть производительности зависит не от использованного языка программирования, а от продуманной структуры приложения.</li><li>Превратите свой сайт в открытый сервис с помощью создания API. Их API является ключом к успеху Twitter. Он позволяет пользователям создавать постоянно расширяющуюся экосистему вокруг Twitter, соревноваться с которой не так-то просто. Вы никогда не сможете сделать столько же работы, сколько смогут Ваши пользователи для Вас, Вам просто не хватит креативных идей. Так что не стесняйтесь, откройте свое приложение и сделайте интеграцию Вашего приложения с другими максимально простой и удобной!</li></ul><div class=sharrre-wrapper><div class=twitter data-url=https://www.insight-it.ru/highload/2008/arkhitektura-twitter/ data-text="Архитектура Twitter" data-title=Tweet></div><div class=facebook data-url=https://www.insight-it.ru/highload/2008/arkhitektura-twitter/ data-text="Архитектура Twitter" data-title=Like></div><div class=linkedin data-url=https://www.insight-it.ru/highload/2008/arkhitektura-twitter/ data-text="Архитектура Twitter" data-title="In Share" ></div></div><div class="card-panel light-blue darken-2 light-blue-text text-lighten-4"><span class=published title=2008-05-10T12:36:00+04:00>10 мая 2008</span>&nbsp;|&nbsp;<span class="vcard author"><a class="url fn light-blue-text text-lighten-4" href=https://www.insight-it.ru/author/ > Иван Блинков </a></span>&nbsp;|&nbsp;<a href=https://www.insight-it.ru/category/highload/ class="light-blue-text text-lighten-4" > Высокие нагрузки </a>&nbsp;|&nbsp;<a href=https://www.insight-it.ru/highload/2008/arkhitektura-twitter/#comments class="light-blue-text text-lighten-4" title="20 комментариев"> 20 <i class=icon-chat></i></a></div><div class=taglist class=row><a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/awstats/ > AWStats </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/erlang/ > Erlang </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/google-analytics/ > Google Analytics </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/memcached/ > Memcached </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/mongrel/ > mongrel </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/munin/ > Munin </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/mysql/ > MySQL </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/nagios/ > Nagios </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/ruby-on-rails/ > Ruby on Rails </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/solaris/ > Solaris </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/starling/ > Starling </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/twitter/ > Twitter </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/arkhitektura/ > архитектура </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/arkhitektura-twitter/ > архитектура Twitter </a>&ensp;</div></footer></article></section></div><div class=after><div id=comments><h4>20 комментариев</h4><ul class=comments-list><li class=comment><em>Трям, 2015-02-02T11:23:33:<em> Mysql? </li><li class=comment><em>Eila, 2012-02-17T05:45:50:<em> Оффтопный вопрос. Почему перевод "старее" (Май 2008) оргинала (Июнь 2009)? <ul class=children><li class=comment><em>Ivan Blinkov, 2012-02-17T07:15:27:<em> В оригинале были добавления, видимо с ними менялась и дата.Я же просто написал новую статью через пару лет: http://www.insight-it.ru/massh... </li></ul></li><li class=comment><em>Harry_Claymore, 2011-03-05T07:38:42:<em> Спасибо за перевод.Но что то не видно куда потеряли Scala. они же как раз начали активно слезать с RoR по причине тормознутости оного. <ul class=children><li class=comment><em>Ivan Blinkov, 2011-03-05T12:09:50:<em> В 2008 году, когда была написана эта статья, они, видимо, еще до этого не додумались :)С тех пор у них многое поменялось, в черновиках есть еще одна статья про них, скоро будет. </li></ul></li><li class=comment><em>sergej, 2010-04-09T22:28:16:<em> Интересно есть где-нибудь список сайтов по информативности подобных википедии и жаль что институты не принимают участия в работе википедии некоторые последние результаты научных экспериментов нигде не найдеш постоянно вляпываюсь в какое-то г.... К этой статье это не относится. <ul class=children><li class=comment><em>Ivan Blinkov, 2011-03-05T12:16:21:<em> Боюсь сайтов, подобных википедии по информативности, в природе не существует, разве что только узкотематические. Если нужен список последних - рекомендую заглянуть в DMOZ или Яндекс.Каталог. </li></ul></li><li class=comment><em>sergej, 2010-04-09T22:09:25:<em> Интересно я понимаю люди учатся друг у друга работе с твиттером а как быть тому кто первый раз увидел такую или наподобие программу и не знает иностранных языков как ему научиться пользоваться этим и почему в интернете из таких вещей делается великая тайна и почти всегда находиш какоето г.... К этой статье это не относится просто об некоторых своих проблемах не знаю куда писать. <ul class=children><li class=comment><em>Ivan Blinkov, 2011-03-05T12:19:49:<em> Принципиальных варианта два: спросить у того, кто уже разобрался, либо разобраться самому методом научного тыка.Насчет незнания иностранных языков отлично помогает словарь и немного терпения - я в детстве по большей части английский по игрушкам компьютерным изучал, так как они на английском появлялись на несколько недель раньше, чем локализованные. </li></ul></li><li class=comment><em>Alekber, 2009-07-08T12:34:51:<em> Очень полезная статья, Спасибо .. пригодиться тем кто загорелся желанием написать социальную сеть)) </li><li class=comment><em>[YS.PRO], 2008-06-19T16:20:53:<em> Классная статья, над многим заставило задуматься. </li><li class=comment><em>Иван Блинков, 2008-05-12T16:06:20:<em> [quote comment="686"]Например не факт, что кэширование всего, что только можно приведет у ускорению.[/quote]Ну я более удачного перевода слова everything, к сожалению, подобрать не смог, правд я в этом пункте потерял небольшое уточнение... А насчет "не следовать бездумно" - это по-моему и без лишних слов подразумевается... </li><li class=comment><em>Alexander Artemenko, 2008-05-12T15:20:51:<em> В целом хорошо, но перевод местами несколько странноватый.Ко всем советам, наверно, стоило бы добавить такой: «Не стоит бездумно следовать всем советам.»Например не факт, что кэширование всего, что только можно приведет у ускорению. Очевидно, что на некотором этапе произойдет наоборот замедление выдачи контента за счет того, что живем мы в реальном мире и машинные ресурсы не бесконечны. </li><li class=comment><em>Иван Блинков, 2008-05-11T08:44:40:<em> [quote comment="671"]А говорят, что MySQL не работает в нагруженных проектах и что там обязательно кластер. А здесь один, хоть и мощный сервер (ну репликация только мастер-слейв, но так как он не особо используется, для служебных задач, то примем что сервер один)[/quote]Где говорят? Вполне себе работает, а насчет кластер vs один дорогой сервер я в следующем своем посте вопрос затрону (завтра опубликую, не забываем на RSS подписываться чтобы не пропустить), так что повторяться здесь пока не хочу.P.S.: спасибо всем за отзывы, а также за трэкбэки - естественные ссылки на блог очень даже приветствуются :) </li><li class=comment><em>aleks_raiden, 2008-05-11T08:23:24:<em> спасибо, отличная статья. А говорят, что MySQL не работает в нагруженных проектах и что там обязательно кластер. А здесь один, хоть и мощный сервер (ну репликация только мастер-слейв, но так как он не особо используется, для служебных задач, то примем что сервер один) </li><li class=comment><em>Dan, 2008-05-10T22:22:25:<em> Спасибо. Для поиска в русскоязычном сегменте Twitter есть виджет http://affiliates.quintura.com... </li><li class=comment><em>ximaera, 2008-05-10T20:20:51:<em> Очень интересно, спасибо!(Как раз, кстати, изучал Erlang) </li><li class=comment><em>Анатолий, 2008-05-10T20:17:10:<em> Весьма актуально, многое знакомо на практике.Есть куда развиваться, будем изучать.Спасибо! ) </li><li class=comment><em>Селицкас Павел, 2008-05-10T19:12:41:<em> Да, немного поражает... :) </li><li class=comment><em>Agarkov.org, 2008-05-10T16:23:06:<em> Спасибо за перевод статьи, интересная. Давно интересно было глянуть как работает столь нагруженный сервис. </li></ul></div><script type=text/javascript>
        var disqus_shortname = 'insight-it';
        var disqus_identifier = '75 http://www.insight-it.ru/?p=75';
        var disqus_url = 'https://www.insight-it.ru/highload/2008/arkhitektura-twitter/';
        var disqus_domain = 'disqus.com';
        var disqus_title = 'Архитектура Twitter';
        var disqus_container_id = 'comments';
        (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//insight-it.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script></div></div><div class="col hide-on-small-only m3 l2"><div class=card><a href=https://www.insight-it.ru/author><div class="card-image tooltipped" data-position=top data-delay=50 data-tooltip="Автор Insight IT"><img src=https://www.insight-it.ru/images/avatar.jpeg><span class=card-title>Иван Блинков</span></div></a></div><div class=toc-wrapper><div style="height: 1px;"><ul class="section table-of-contents"><li><a href=# title="Архитектура Twitter">Архитектура Twitter</a><li><a href=#istochniki-informatsii title="Источники информации">Источники информации</a></li><li><a href=#platforma title=Платформа>Платформа</a></li><li><a href=#statistika title=Статистика>Статистика</a></li><li><a href=#arkhitektura title=Архитектура>Архитектура</a></li><li><a href=#podvodim-itogi title="Подводим итоги">Подводим итоги</a></li></li></ul></div></div></div></div></div></main><footer class=page-footer><div id=footer class=container><div class=row><div class="col m4 s12"><h5 class=white-text>Иван Блинков</h5><ul><li><a href=mailto:insight-it@blinkov.ru rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-mail white-text"></i> insight-it@blinkov.ru </span></a></li><li><a href=https://www.linkedin.com/in/ivanblinkov rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-linkedin light-blue-text text-darken-3"></i> LinkedIn </span></a></li><li><a href=https://twitter.com/blinkov rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-twitter cyan-text text-accent-2"></i> @blinkov </span></a></li><li><a href="http://plus.google.com/102882395551389724078?rel=author" rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-gplus red-text"></i> Google </span></a></li><li><a href=https://www.facebook.com/ivan.blinkov rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-facebook blue-text text-darken-3"></i> Facebook </span></a></li><li><a href=https://www.insight-it.ru/feed/ rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-rss orange-text"></i> Подписаться по RSS </span></a></li></ul><a href=//feeds.feedburner.com/insight-it/feed target=_blank rel="external nofollow"><img src="//feeds.feedburner.com/~fc/insight-it/feed?bg=b3e5fc&amp;fg=222222&amp;anim=1" height=26 width=88></a>&nbsp;<a href=//twitter.com/blinkov target=_blank rel="external nofollow"><img src=//button.twittercounter.com/animated/blinkov/222222/b3e5fc width=88 height=26></a></div><div class="col m4 s12"><h5 class=white-text>Рубрики</h5><ul><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/highload/ > Высокие нагрузки </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/interactive/ > Интерактивные сайты </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/linux/ > Linux </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/python/ > Python </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/erlang/ > Erlang </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/storage/ > Хранение данных </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/frontend/ > Frontend </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/theory/ > Теория </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/event/ > Мероприятия </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/misc/ > Разное </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/php/ > PHP </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/security/ > Безопасность </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/vacancy/ > Вакансии </a></li></ul><h5 class=white-text>Навигация</h5><ul><li class><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/blog/ >Блог</a></li><li class><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/about/ >О&nbsp;сайте</a></li><li class><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/author/ >Об&nbsp;авторе</a></li></ul></div><div class="col m4 s12"><h5 class="white-text center-align">Теги</h5><div class="tagcloud taglist"><span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/programmirovanie/ > Программирование </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/meropriiatiia/ > мероприятия </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/masshtabiruemost/ > Масштабируемость </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/apache/ > Apache </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/informatsionnye-tekhnologii/ > информационные технологии </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/memcached/ > Memcached </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/internet/ > интернет </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/google/ > Google </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/mysql/ > MySQL </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/c/ > C++ </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/arkhitektura/ > архитектура </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/hbase/ > HBase </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/tekhnologiia/ > технология </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/python/ > Python </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/javascript/ > JavaScript </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/oop/ > ООП </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/nginx/ > nginx </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/facebook/ > Facebook </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/highload/ > highload </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/php/ > PHP </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/razrabotka/ > разработка </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/hadoop/ > Hadoop </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/online/ > online </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/linux/ > Linux </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/java/ > Java </a></span>&ensp;</div></div></div></div><div class=footer-copyright><div class=container> © Insight IT, 2008-2015 <a class="license right tooltipped" rel="license nofollow" target=_blank href=http://creativecommons.org/licenses/by-nc-nd/4.0/ data-position=top data-delay=50 data-tooltip="Все материалы опубликованы под лицензией Creative Commons Attribution-NonCommercial-NoDerivatives 4.0"><img alt="Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License" src=https://www.insight-it.ru/theme/images/license.png></a></div></div></footer><script src=//code.jquery.com/jquery-2.1.1.min.js></script><script src=https://www.insight-it.ru/theme/js/main.js?b5bb290d></script><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js ','ga');
ga('create', 'UA-3403373-1', 'auto');
ga('send', 'pageview');
</script><script type=text/javascript>(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter30650472 = new Ya.Metrika({id:30650472, webvisor:true, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src=//mc.yandex.ru/watch/30650472 style="position:absolute; left:-9999px;" alt></div></noscript></body></html>