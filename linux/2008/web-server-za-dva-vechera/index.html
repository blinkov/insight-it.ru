<!DOCTYPE html>
<html lang=ru xmlns=http://www.w3.org/1999/xhtml xmlns:og=http://ogp.me/ns# xmlns:fb=https://www.facebook.com/2008/fbml><head><meta http-equiv=Content-Type content="text/html; charset=UTF-8"><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=msapplication-tap-highlight content=no><title>Веб-сервер за два вечера</title><link href="//fonts.googleapis.com/css?family=Open+Sans&amp;subset=latin,cyrillic" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=PT+Sans&amp;subset=latin,cyrillic" rel=stylesheet type=text/css><link rel=stylesheet href=https://www.insight-it.ru/theme/css/main.css?5e55de6b><link rel=canonical href=https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/ ><meta property=og:url content=https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/ ><meta property=og:title content="Веб-сервер за два вечера"><meta property=og:type content=article><meta name=description content="Многие из вас наверняка все еще помнят те времена, когда компьютерная техника находилась лишь на ранней стадии своего ..."><meta property=og:description content="Многие из вас наверняка все еще помнят те времена, когда компьютерная техника находилась лишь на ранней стадии своего ..."><meta name=keywords content="Beastie,FreeBSD,lighttpd,PostgreSQL,Unix,веб-сервер,операционная система,сервер,системное администрирование"><meta name=author content="Иван Блинков"><meta property=og:site_name content="Insight IT"><meta property=og:locale content=ru_RU><link href=https://www.insight-it.ru/feed/index.xml type=application/rss+xml rel=alternate title="Insight IT RSS Feed"></head><body><header><div class=container><a href=# data-activates=nav-mobile class="button-collapse top-nav waves-effect waves-light circle"><i class=icon-menu></i></a></div><ul id=nav-mobile class="side-nav fixed"><li class=logo><a id=logo-container href=https://www.insight-it.ru/ class=brand-logo><h4>Insight IT</h4></a></li><li class=bold><a href=https://www.insight-it.ru/highload/ > Высокие нагрузки </a></li><li class=bold><a href=https://www.insight-it.ru/interactive/ > Интерактивные сайты </a></li><li class=no-padding><ul class="collapsible collapsible-accordion"><li class=bold><a class="collapsible-header waves-effect waves-red"> Рубрики </a><div class=collapsible-body><ul><li><a href=https://www.insight-it.ru/category/linux/ > Linux </a></li><li><a href=https://www.insight-it.ru/category/python/ > Python </a></li><li><a href=https://www.insight-it.ru/category/erlang/ > Erlang </a></li><li><a href=https://www.insight-it.ru/category/frontend/ > Frontend </a></li><li><a href=https://www.insight-it.ru/category/storage/ > Хранение данных </a></li><li><a href=https://www.insight-it.ru/category/theory/ > Теория </a></li><li><a href=https://www.insight-it.ru/category/event/ > Мероприятия </a></li><li><a href=https://www.insight-it.ru/category/misc/ > Разное </a></li><li><a href=https://www.insight-it.ru/category/index/ > Все рубрики </a></li></ul></div></li></ul></li><li class=no-padding><ul class="collapsible collapsible-accordion"><li class=bold><a class="collapsible-header waves-effect waves-red"> Страницы </a><div class=collapsible-body><ul><li><a href=https://www.insight-it.ru/blog/ > Блог </a></li><li><a href=https://www.insight-it.ru/about/ > О сайте </a></li><li><a href=https://www.insight-it.ru/author/ > Об авторе </a></li><li><a href=https://www.insight-it.ru/consulting/ > Консультации </a></li><li><a href=https://www.insight-it.ru/contact/ > Контакты </a></li><li><a href=https://www.insight-it.ru/resume/ > Резюме </a></li><li><a href=https://www.insight-it.ru/search/ > Поиск по сайту </a></li></ul></div></li></ul></li></ul></header><main><nav class=top-nav><div class=container><div class=nav-wrapper><ul id=nav-mobile class="right hide-on-med-and-down"><li class><a href=/blog/ >Блог</a></li><li class><a href=/about/ >О&nbsp;сайте</a></li><li class><a href=/author/ >Об&nbsp;авторе</a></li></ul><h1><a class=page-title> Веб-сервер за два вечера </a></h1></div></div></nav><div class=container><div class=row><div class="col s12 m9 l10"><div class="materialdesign section scrollspy"><section id=content class=body><article class=entry-content><p><img alt=Beastie class=left src=https://www.insight-it.ru/images/beastie.png title="Beastie: The BSD Daemon"> Многие из вас наверняка все еще помнят те времена, когда компьютерная техника находилась лишь на ранней стадии своего развития. Позволить себе иметь в личном распоряжении персональный компьютер мог далеко не каждый, а о серверном оборудовании и вовсе не могло быть и речи.</p><p>Но, к счастью, времена меняются, и на сегодняшний день покупка даже серверного оборудования связана с достаточно скромными затратами, сопоставимыми с бюджетом покупки настольного компьютера или ноутбука. Но возникает другой вопрос - а что же с этим оборудованием делать? Вполне логичным ответом было бы: "использовать по прямому назначению", о чем мы с Вами сегодня и поговорим в компании с замечательным персонажем по имени <em><a href=/tag/beastie/ >Beastie</a></em> и операционной системой <strong><a href=/tag/freebsd/ >FreeBSD</a></strong>, с которой он частенько ассоциируется.</p><p>Под "использованием по прямому назначению" конечно же можно было подразумевать множество разных применений, но я хотел все-таки остановиться на варианте использования в роли веб-сервера, как альтернативу многочисленным услугам по предоставлению shared и VPS хостинга.</p><h3 id=predistoriia>Предистория</h3><p>Некоторое время назад ко мне в руки попал простенький сервер, который как раз предполагалось использовать как хостинг для одного из проектов. Оставалось лишь сделать его пригодным для выполнения этой задачи. Казалось бы дело это как минимум не тривиальное, но буквально через пару дней мне довелось убедиться в обратном.</p><p>Ассортимент оборудования, спрятанного внутри <strong>1U</strong> корпуса, был вполне стандартным, ничего особенного: процессор <strong>Intel Xeon 5335</strong>, оперативная память <strong>Kingston 2х2 GB ECC Full-buffered</strong>, жесткий диск изначально только один - <strong>WD 150 GB 10000rpm SATA</strong>, а вот модель материнской платы, к сожалению, на память назвать не могу, вроде что-то от <strong>SuperMicro</strong>, с простенькой встроенной видеокартой, сетевой картой с двумя гигабитными Ethernet портами и встроенным же видимо software RAID-контроллером. Опытный глаз наверняка заметил бы в этом списке сильную недоукомплектацию, особенно проявляющуюся при упоминании процессора в единственном числе, отсутствии RAID, и скромным объемам оперативной памяти. Объясняется это достаточно просто - проект еще предстоит тестировать перед запуском, а этой платформы для этого будет более чем достаточно.</p><p>Перед запуском проекта в открытое плавание естественно предстоит upgrade оборудования.</p><h3 id=den-pervyi>День первый</h3><h4>Подготовка</h4><p>Если верить бумажкам, идущим в комплекте с сервером, на единственный жестком диск в магазине установили демо-версию одной из серверных операционных систем от одной мало кому известной корпорации. Смотреть что это за зверь такой у меня особого желания не было, по-этому я не долго думая пошел искать среди своей коллекции дистрибутивов болванку с заранее выбранным <a href=/tag/opensource/ >opensource</a> решением вопроса об <a href=/tag/os/ >операционной системе</a> - <strong><a href=/tag/freebsd/ >FreeBSD 6.2</a></strong>.</p><p>Почему выбор пал именно на эту <a href=/tag/os/ >ОС</a> объяснить не так уж и просто, но я все же попробую. Выбор был достаточно классический: <em><a href=/tag/unix/ >Unix</a> vs <a href=/tag/linux/ >Linux</a></em>, возникали еще некоторые сомнения насчет решений от <em>Sun</em> в виде <em>Solaris</em> и <em>OpenSolaris</em>, но от них я отказался достаточно быстро в основном из-за более чем скромной документации и проприетарного происхождения, попутно закрыв глаза на все положительные отзывы, которые я видел в Сети.</p><p>Так как мне хотелось иметь иметь перед собой <em>конструктор</em> для сбора системы именно таким образом, как было бы удобно мне, а не разработчикам дистрибутива, то список вариантов, выступавших на стороне <a href=/tag/linux/ >Linux</a> быстро начал сокращаться, начиная с <strong>CentOS</strong>. Предпоследним вычеркнутым из списка дистрибутивов <a href=/tag/linux/ >Linux</a> был <strong>Debian</strong>, что оставило в нем лишь <a href=/tag/gentoo/ >Gentoo Linux</a>. Финальный выбор между <a href=/tag/freebsd/ >FreeBSD</a> и <a href=/tag/gentoo/ >Gentoo</a> был сделан уже легче: во-первых, по <a href=https://www.insight-it.ru/linux/2008/gentoo-linux-sony-vaio/ >своему опыту с ноутбуком</a> я уже понял, что с <a href=/tag/gentoo/ >Gentoo</a> предстояло бы немало хлопот, а, во-вторых, в новый <em>конструктор</em>, как ни крути, "играть" намного интереснее, чем в старый, так что долго думать не пришлось :)</p><h4>Установка</h4><p>Найдя наконец диск с <a href=/tag/freebsd/ >FreeBSD</a>, я попытался решить следующий возникший вопрос: а как же установить операционную систему с компакт-диска на компьютер, не имеющий соответствующего привода? Так как сервер был запломбирован и находился на гарантии, вариант частично разобрать и подключить обычный привод отпал сразу же, ровно как и вариант с подключением внешнего привода по причине его отсутствия. Подходящее решение было найдено практически сразу же, благо жесткие диски подключались по принципу hotswap: вытащив жесткий диск без развинчивания корпуса, я подключил его к подвернувшемуся под руку настольному компьютеру, обладающему DVD-приводом. Загрузка прошла успешно и я приступил к установке, руководствуясь <a href=https://www.insight-it.ru/goto/358a772c/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html>FreeBSD Handbook</a>, пересказывать его особого желания у меня нет, остановлюсь лишь на некоторых особенностях этого процесса.</p><p>Первым этапом установки, где пришлось задуматься, был <strong>fdisk</strong> (разбиение диска на так называемые <em>slice</em>). Для избежания путаницы для самого себя, я решил, что размещу рабочие директории http-сервера и базы данных в <strong>/var</strong>, которую и выделил в отдельный <em>slice</em>, занимающий б<em>о</em>льшую часть доступного дискового пространства. В ассортимент доступного при установке программного обеспечения я особо вникать не стал, так как знал, что у меня всегда будет возможность заняться им позже, и как следствие этого выбрал что-то очень близкое к стандартному набору <a href=/tag/po/ >ПО</a>. Подтвердив установку и подождав достаточно непродолжительный период времени, я перезагрузил систему, вытащив установочный диск в процессе. Установка оказалась на удивление элементарной, что привело к полученной с первой попытки работоспособной системе. Увидев долгожданное приглашение к вводу логина и пароля я убедился, что могу беспрепятственно получить доступ к консоли и сразу же выключил систему, чтобы перенести жесткий диск обратно на сервер.</p><p>Так как сетевое подключение еще только предстояло настроить, то на сервер переносить пришлось не только жесткий диск, но и монитор с клавиатурой. На новом оборудовании все так же прекрасно запустилось, и я принялся за настройку подключения. Особых проблем не возникло - в <a href=https://www.insight-it.ru/goto/ecbcc1a6/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html#NETWORK-COMMUNICATION>Handbook</a>'е все более чем качественно задокументировано, самым сложным был процесс выбора драйвера, вернее осознавание того, что он изначально правильно сам установился. Следующей маленькой проблемой было угадывание какой же из <em>Ethernet</em>-портов был только что настроен, и, соответственно, подключение кабеля именно в него, а не в его соседа. После завершения всех манипуляций я с радостью обнаружил, что <strong>ping</strong> от сервера до gateway'а успешно проходит, что по сути и означало окончание настройки сетевого подключения. Следущей целью было избавить себя от необходимости пользоваться позаимствованными у другого компьютера клавиатурой и монитором. Дело тоже оказалось достаточно нехитрым, <strong>sshd</strong> установился и настроился вполне самостоятельно где-то в процессе установки, от меня потребовалось лишь создать дополнительного пользователя, написать нехитрую строчку в <strong>rc.conf</strong>: <code>sshd_enable="YES"</code> и собственно запустить daemon'а. Этого было вполне достаточно, чтобы набрав на своем <a href=/tag/noutbuk/ >ноутбуке</a><strong>ssh</strong> в консоли, с указанием необходимых параметров, получить удаленный доступ к серверу по протоколу <strong>SSH</strong>.</p><p>Решив, что для начала этого будет вполне достаточно, я отправился по другим делам, так как тот вечер еще даже не успел подойти к своему завершению.</p><h3 id=den-vtoroi>День второй</h3><h4>Программное обеспечение</h4><p>Хорошо, вполне работоспособную <a href=/tag/os/ >операционную систему</a> мы получили. Осталось снабдить ее необходимым <a href=/tag/po/ >программным обеспечением</a> для выполнения своих обязанностей, определенных нами заранее.</p><p>Прежде чем что-либо устанавливать, очень не пожалел, что ознакомился как с соответствующим <a href=https://www.insight-it.ru/goto/6ffb90d6/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html#PORTS>разделом handbook'a</a>, так и с <a href=https://www.insight-it.ru/goto/a3e92771/ rel=nofollow target=_blank title=http://www.freebsd.org/ports/ >доступным ассортиментом ПО</a>. После этого я перешел-таки собственно к выбору и установке <a href=/tag/po/ >ПО</a>:</p><ul><li>Так как одной из основных составных частей практически любого веб-сервера является http-daemon, именно с его выбора я и решил начать. Причем начал еще задолго до описываемых событий, вся многофункциональность <a href=/tag/apache/ >Apache</a> мне была не нужна, а аналоги <code>mod_auth</code> и <code>mod_rewrite</code> есть и в более легких http-серверах. Cамо веб-приложение, которое там предполагалось располагать, работает по большей части на <a href=/tag/php/ >PHP</a>, так что ничего особенного от httpd совсем не требовалось. В итоге финальный выбор был между <em>быстрыми</em> и <em>легкими</em> вариантами: <strong><a href=/tag/nginx/ >nginx</a></strong> и <strong><a href=/tag/lighttpd/ >lighttpd</a></strong>, какой-либо весомой причины по которой я выбрал <strong><a href=/tag/lighttpd/ >lighttpd</a></strong> с <code>mod\_fastcgi</code> привести не могу, основным фактором был мой некоторый опыт работы с ним в прошлом, и отсутствие такового в отношении <strong><a href=/tag/nginx/ >nginx</a></strong>. Установка прошла легко и непринужденно с помощью в сжатые сроки найденного в <a href=/tag/google/ >Google</a><a href=https://www.insight-it.ru/goto/14d0519d/ rel=nofollow target=_blank title=http://www.cyberciti.biz/faq/howto-setup-lighttpd-fastcgi-php-server/ >мануала</a>.</li><li>Другим немаловажным компонентом сервера является <strong>ftpd</strong>, как известно используемый для передачи файлов. Собственно говоря, если активное его использование не планируется, то особого значения какой именно сервер будет использоваться значения не имеет: любой из доступных устанавливается настраивается в пару простых шагов без каких-либо проблем (если это имеет значение - я выбрал <strong>vsftpd</strong>, так как мне уже далеко не один раз доводилось его настраивать на домашних компьютерах, и, как следствие, даже инструкция не понадобилась). Но при потенциальной возможности работы через Интернет, этот протокол является достаточно уязвимым, так как не использует никакого шифрования. Эта проблема решается с помощью механизма <em>FTP over SSH</em>, который представляет собой использование <strong>SSH</strong> в роли туннеля для передачи файлов по <strong>FTP</strong>. О том, как воспользоваться этим механизмом вам подскажет <strong>man ssh</strong>, какой-либо дополнительной конфигурации он не требует, разве что настройки соответствующим образом firewall'а, но об этом я расскажу позже.</li><li>Сам <a href=/tag/php/ >PHP</a> установлен последней доступной в <a href=https://www.insight-it.ru/goto/a3e92771/ rel=nofollow target=_blank title=http://www.freebsd.org/ports/ >ports</a> версии и , как уже упоминалось, был подключен к <a href=/tag/lighttpd/ >lighttpd</a> с помощью <code>mod_fastcgi</code>, какой-либо дополнительной конфигурации с моей стороны не потребовалось, я разве что выбрал список модулей (в общем-то тоже занятие не сложное, достаточно лишь осознавать какие именно используются, плюс я еще решил <strong><a href=https://www.insight-it.ru/goto/41a25ac6/ rel=nofollow target=_blank title=http://www.hardened-php.net/suhosin/ >Suhosin</a></strong> установить) и просто просмотрел по диагонали все конфиги (в основном сам <strong>php.ini</strong> и <strong>lighttpd.conf</strong>) на предмет их соответствия потребностям моего приложения. Отдельная история возникла с лишь одним модулем - <em><a href=/tag/blitz/ >Blitz</a></em>, который на данный момент все еще отсутствует в репозиториях как <a href=/tag/freebsd/ >FreeBSD</a>, так и подавляющего большинства (если не всех) дистрибутивов <a href=/tag/linux/ >Linux</a>. Его пришлось устанавливать вручную из исходников по <a href=https://www.insight-it.ru/goto/1e985790/ rel=nofollow target=_blank title=http://alexeyrybak.com/blitz/blitz_ru.html#install_config.install>соответствующему мануалу</a>, что правда тоже дело не хитрое и заняло всего несколько минут.</li><li><strong><a href=/tag/subd/ >СУБД</a></strong> особо выбирать не пришлось - приложение написано было с расчетом на <strong><a href=/tag/postgresql/ >PostrgeSQL</a></strong>, ее соответственно и прикручивал к <strong><a href=/tag/php/ >PHP</a>.</strong> Этот этап был пожалуй одним из самых проблематичных, так как сразу после классического <code>make install clean</code> соответствующий daemon запускаться отказался. Какого-либо осознанного сообщения об ошибке <code>/usr/local/etc/rc.d/postgresqld start</code> не выводило как в консоль, так и в логи, но тем не менее консольный клиент <strong>psql</strong> и само веб-приложение жаловались на отсутствие запущенной <a href=/tag/subd/ >СУБД</a>. Этот факт сильно затруднял поиск возможных вариантов решения на просторах <a href=/tag/internet/ >Сети</a>, так что не найдя ничего полезного я решил заняться диагностикой проблемы и поиском решения для нее самостоятельно. Методом проб и ошибок, перебрав множество возможных вариантов запуска daemon'а, я пришел к выводу, что у пользователя от имени которого он должен был запускаться явно проблемы с доступом к файловой системе. Видимо так получилось из-за нестандартного расположения самой базы данных - в директории <strong>/var</strong>. Не смотря на тот факт, что <strong>chown</strong> и <strong>chmod</strong> были использованы по прямому назначению в отношении соответствующих директорий для установления прав доступа. В итоге оказалось, что директория указанная для этого пользователя как домашняя (по памяти пишу, могу ошибиться, но вроде <strong>/usr/local/pgsql</strong>) по каким-то причинам не создалась и соответственно именно этот факт и мешал запуску daemon'а. Восстановив справедливость в отношении этого пользователя, я обнаружил, что <strong><a href=/tag/postgresql/ >PostrgeSQL</a></strong> успешно запустился-таки, а мое приложение тоже стало функционировать именно так, как ему было положено. Проверив содержимое соответствующего конфига, я решил его больше не трогать, а то как говорится "premature optimization is the root of all evil"&amp;copyright;. За компанию решил установить веб-интерфейс к <a href=/tag/postgresql/ >PostrgeSQL</a> - <strong>phppgadmin</strong>. Собравшись из <a href=https://www.insight-it.ru/goto/a3e92771/ rel=nofollow target=_blank title=http://www.freebsd.org/ports/ >портов</a>, он повел себя как-то не очень адекватно, совсем не так каким я привык его видеть у себя на <a href=/tag/noutbuk/ >ноутбуке</a>, разбираться в причинах было не охота - простое копирование и замена соответствующей директории по <em>ftp</em> буквально за минуту решило проблему.</li><li>Вариантов фильтров сетевого трафика в <a href=/tag/freebsd/ >FreeBSD</a> имеется предостаточно: <a href=https://www.insight-it.ru/goto/b7a4c2f7/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html#FIREWALLS-PF>pf</a>, <a href=https://www.insight-it.ru/goto/963bd5ec/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html#FIREWALLS-IPF>ipf</a>, <a href=https://www.insight-it.ru/goto/aee50277/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html#FIREWALLS-IPFW%22>ipfw</a>. Опыта работы ни с одним из них у меня не было, так что выбор происходил из достаточно субъективных критериев - очевидности принципов работы правил и достаточности документации. Так как я был уверен, что каждый из них сможет обеспечить достаточный уровень безопасности, основываясь на указанных выше критериях в итоге я выбрал <strong>ipf</strong>. Документация позволила легко и непринужденно все установить и настроить, правда за компанию пришлось разбираться и с <a href=https://www.insight-it.ru/goto/420d629d/ rel=nofollow target=_blank title=http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/book.html#KERNELCONFIG>пересборкой ядра</a>. В качестве базы для построения собственного списка правил я использовал приведенный все там же, в документации, пример. Само собой пришлось доработать его под конкретную систему, но методом проб и ошибок эта задача выполняется достаточно быстро <em>(будте осторожны с 22 портом, используемым для SSH - очень легко на этом этапе случайно заблокировать самому себе доступ к серверу)</em>. Получившийся в итоге список правил приводить не буду, так как его еще предстоит довести до ума на активно работающей системе.</li></ul><h3 id=zakliuchenie>Заключение</h3><p>Не прошло и двух дней, как из простого набора оборудования получился вполне готовый к работе веб-сервер, конечно же доводить до ума его придется еще достаточно долго, но просто стабильно работать он был в состоянии уже тогда. Дальше его отвезли в место постоянного его прибывания, подключили к более-менее приличному интернет-каналу, с моей стороны при этом потребовалось лишь слегка поменять настройки сетевого подключения, и вот - он уже доступен из Сети. Практически сразу же обнаружился один мой недочет в плане выбора <a href=/tag/po/ >ПО</a> - буквально в первую же ночь после открытия публичного доступа к серверу нашлась масса желающих попытаться подобрать по словарю логин и пароль для доступа к серверу по SSH, но он был открыт лишь для одной учетной записи, у которой было мягко говоря нестандартное имя пользователя, даже его никто за ночь не смог угадать, а до более чем 20-символьного пароля дело так и не дошло. На следующее утро я, не долго думая, установил программу под названием <strong><a href=https://www.insight-it.ru/goto/d4707261/ rel=nofollow target=_blank title=http://www.freebsd.org/cgi/url.cgi?ports/security/sshguard/pkg-descr>sshguard</a></strong>, которая сразу же предотвратила все последующие попытки подобным образом издеваться над сервером. Дальше надо было настроить запись на DNS-сервере для ассоциации домена с IP нашего сервера, настроить почту, закончить работу над самим веб-приложением и много чего еще, но это уже совсем другая история.</p><div class=sharrre-wrapper><div class=twitter data-url=https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/ data-text="Веб-сервер за два вечера" data-title=Tweet></div><div class=facebook data-url=https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/ data-text="Веб-сервер за два вечера" data-title=Like></div><div class=linkedin data-url=https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/ data-text="Веб-сервер за два вечера" data-title="In Share" ></div></div><div class="card-panel light-blue darken-2 light-blue-text text-lighten-4"><span class=published title=2008-02-14T15:59:00+03:00>14 февраля 2008</span>&nbsp;|&nbsp;<span class="vcard author"><a class="url fn light-blue-text text-lighten-4" href=https://www.insight-it.ru/author/ > Иван Блинков </a></span>&nbsp;|&nbsp;<a href=https://www.insight-it.ru/category/linux/ class="light-blue-text text-lighten-4" > Linux </a>&nbsp;|&nbsp;<a href=https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/#comments class="light-blue-text text-lighten-4" title="27 комментариев"> 27 <i class=icon-chat></i></a></div><div class=taglist class=row><a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/beastie/ > Beastie </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/freebsd/ > FreeBSD </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/lighttpd/ > lighttpd </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/postgresql/ > PostgreSQL </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/unix/ > Unix </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/veb-server/ > веб-сервер </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/operatsionnaia-sistema/ > операционная система </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/server/ > сервер </a>&ensp;<a class="tag light-blue lighten-2 white-text" href=https://www.insight-it.ru/tag/sistemnoe-administrirovanie/ > системное администрирование </a>&ensp;</div></footer></article></section></div><div class=after><div id=comments><h4>27 комментариев</h4><ul class=comments-list><li class=comment><em>Alex, 2009-09-27T22:40:40:<em> To Автор.1. Как вы оцениваете размер выгоды в результате отказа от использования Апача (на сколько он больше загружает процессор)?2. Хотелось бы узнать о том, что вас не устроило в ЦентОСе (выбрать необходимые компоненты - пожалуйста, хотите PostrgeSQL - пожалуйста, не хотите Апач - тоже пожалуйста, при чем все это прямо из комплекта базового установочного диска)?3. Зря отказались от Дебиан.П.С. Присоединяюсь к Владиславу - все манипуляции возможно осуществить за один короткий вечерок :-). </li><li class=comment><em>Владислав, 2009-05-19T07:11:25:<em> >> www2>>От Debian зря отказались. Видмо не выросли ещё из >>возраста, когда хочется компилировать.to www2. До этого возраста нужно дорасти. Статья написана довольно интересно, за что Ивану спасибо. На самом деле все манипуляции возможно осуществить за один короткий вечерок ;) </li><li class=comment><em>MC, 2008-06-05T14:16:51:<em> Спасибо Иван, как и предпологал очень интересная для меня статья. Именно этим собираюсь заняться в ближайшее время. </li><li class=comment><em>Иван Блинков, 2008-04-10T09:02:46:<em> [quote comment="498"]Вы ничего не поняли :(Тезис: Публично доступные сервисы обновлять надо, т.к. в них периодически находят новые дыры и уязвимости.Те системы, где:1. для установки или обновления компонента требуется компиляция,2. где при обновлении нужно подправлять какой-то конфиг, потому что поменялась версия пакета,3. где можно собирать что-то с собственными опциями или патчами.Приводят соответственно к:1. высокой загрузке сервера, что негативно отражается на качестве обслуживания клиентов, или к извращениям с монтированием удалённых каталогов по NFS и компиляции по сети,2. приводят к более длительному отсутствию сервиса и к лишней головной боли при разбирательствах, какие-же строчки надо исправить в конфиге, чтобы сервис наконец-то заработал,3. приводит к невозможности обойтись без компиляции и к лишней головной боли при попытках вспомнить, с какими же опциями и патчами собирался этот пакет/система/ядро.Зачем кластер небольшой группе лиц, догадаться не могу. Судя по веб-серверу, для публичного предоставления какого-либо сервиса, где основную нагрузку создаёт именно "публика". Стало быть в системе есть публичные сервисы, стало быть её нужно обновлять. Или мои предположения не верны?[/quote]Предположения отчасти верны, но меня, как единственного человека, отвечающего за техническую часть проекта, этот небольшой список негативных моментов вполне устраивает, я знал на что шел. Когда сервер единственный и незаменимый, то да, срочная компиляция новой версии чего-либо приведет к излишней нагрузке на сервер, а значит и замедлению функционирования сервися (что тоже не очень смертельно, так как можно это и ночью сделать, когда нагрузка минимальна), но если проект уже вырос до хотябы трех серверов, то обновление можно произвести существенно легче, просто сделав шаг "назад" в развитии.Конечно в любом бинарном Linux-дистрибутиве этот процесс проходил бы на порядок проще, но я видимо слишком привык к гибкости скомпилированного программного обеспечения. </li><li class=comment><em>www2, 2008-04-10T03:15:39:<em> Вы ничего не поняли :(Тезис: Публично доступные сервисы обновлять надо, т.к. в них периодически находят новые дыры и уязвимости.Те системы, где:1. для установки или обновления компонента требуется компиляция,2. где при обновлении нужно подправлять какой-то конфиг, потому что поменялась версия пакета,3. где можно собирать что-то с собственными опциями или патчами.Приводят соответственно к:1. высокой загрузке сервера, что негативно отражается на качестве обслуживания клиентов, или к извращениям с монтированием удалённых каталогов по NFS и компиляции по сети,2. приводят к более длительному отсутствию сервиса и к лишней головной боли при разбирательствах, какие-же строчки надо исправить в конфиге, чтобы сервис наконец-то заработал,3. приводит к невозможности обойтись без компиляции и к лишней головной боли при попытках вспомнить, с какими же опциями и патчами собирался этот пакет/система/ядро.Зачем кластер небольшой группе лиц, догадаться не могу. Судя по веб-серверу, для публичного предоставления какого-либо сервиса, где основную нагрузку создаёт именно "публика". Стало быть в системе есть публичные сервисы, стало быть её нужно обновлять. Или мои предположения не верны? </li><li class=comment><em>www2, 2008-04-10T03:15:11:<em> Вы ничего не поняли :(Тезис: Публично доступные сервисы обновлять надо, т.к. в них периодически находят новые дыры и уязвимости.Те системы, где:1. для установки или обновления компонента требуется компиляция,2. где при обновлении нужно подправлять какой-то конфиг, потому что поменялась версия пакета,3. где можно собирать что-то с собственными опциями или патчами.Приводят соответственно к:1. высокой загрузке сервера, что негативно отражается на качестве обслуживания клиентов, или к извращениям с монтированием удалённых каталогов по NFS и компиляции по сети,2. приводят к более длительному отсутствию сервиса и к лишней головной боли при разбирательствах, какие-же строчки надо исправить в конфиге, чтобы сервис наконец-то заработал,3. приводит к невозможности обойтись без компиляции и к лишней головной боли при попытках вспомнить, с какими же опциями и патчами собирался этот пакет/система/ядро.Зачем кластер небольшой группе лиц, догадаться не могу. Судя по веб-серверу, для публичного предоставления какого-либо сервиса, где основную нагрузку создаёт именно "публика". Стало быть в системе есть публичные сервисы, стало быть её нужно обновлять. Или мои предположения не верны? </li><li class=comment><em>Иван Блинков, 2008-04-09T16:26:28:<em> А просто описываемая в посте ситуация абсолютно не соответствует описываемой Вами; этот сервер предназначен для частного проекта, который как организовывается так и реализуется очень небольшой группой физических лиц, с промышленным масштабом никак даже приблизительно не связанных. В будущем возможно будет переход на кластер, если проект удастся, но сомневаюсь, что FreeBSD этому сможет хоть как-то помешать, разворачивать ее не сильно сложнее того же Debian, было бы желание... </li><li class=comment><em>Иван Блинков, 2008-04-09T16:26:02:<em> А просто описываемая в посте ситуация абсолютно не соответствует описываемой Вами; этот сервер предназначен для частного проекта, который как организовывается так и реализуется очень небольшой группой физических лиц, с промышленным масштабом никак даже приблизительно не связанных. В будущем возможно будет переход на кластер, если проект удастся, но сомневаюсь, что FreeBSD этому сможет хоть как-то помешать, разворачивать ее не сильно сложнее того же Debian, было бы желание... </li><li class=comment><em>www2, 2008-04-09T14:09:29:<em> От Debian зря отказались. Видмо не выросли ещё из возраста, когда хочется компилировать.Несмотря на то, что полгода назад был ярым приверженцем FreeBSD, заставил себя попробовать Debian. Заставил меня это сделать простой вопрос: "А не игнорирую ли я сознательно, возможно более лучшую систему, зацикливаясь только на FreeBSD?" И действительно, оказалось, что я её игнорировал.Сейчас на новой работе с тоской смотрю на FreeBSD, настроенные год назад другим человеком. Много чего не хватает, хотелось бы доустановить, но нельзя. Новых программ на них не поставить - нет ни пакетов ни портов для той версии. Обновлять саму систему боязно - ядро собиралось с нестандартными опциями и со сторонними патчами. Это в принципе не сложно, но вдруг что-то не склеится, а система в постоянном использовании, огребу я по самую макушку за свою инициативу. Поэтому серверы не обновляю, хоть понимаю, что это не правильно. Руководство развивать систему не желает, собирается всё переводить на CISCO и Windows.Могу сказать Debian - это надёжная система ПРОМЫШЛЕННОГО уровня, постоянно обновляющаяся без риска что-то поломать. При обновлениях обеспечивается минимальное время отсутствия сервиса - несколько секунд для демонов, минута-две на обновление ядра. При обновлении ничего не компилируется, а значит не тормозит и поэтому обновление не мешает клиентам. Установка новых демонов и программ тоже простая и очень быстрая. Пока у Вас один сервер, разница во времени обслуживания не существенная, но если у Вас будет серверов 20 - на FreeBSD Вы будете тратить всё доступное время, а с Debian у Вас всё будет работать, планово обновляться, установка новой программы не потребует больших временнЫх ресурсов. </li><li class=comment><em>www2, 2008-04-09T14:09:16:<em> От Debian зря отказались. Видмо не выросли ещё из возраста, когда хочется компилировать.Несмотря на то, что полгода назад был ярым приверженцем FreeBSD, заставил себя попробовать Debian. Заставил меня это сделать простой вопрос: "А не игнорирую ли я сознательно, возможно более лучшую систему, зацикливаясь только на FreeBSD?" И действительно, оказалось, что я её игнорировал.Сейчас на новой работе с тоской смотрю на FreeBSD, настроенные год назад другим человеком. Много чего не хватает, хотелось бы доустановить, но нельзя. Новых программ на них не поставить - нет ни пакетов ни портов для той версии. Обновлять саму систему боязно - ядро собиралось с нестандартными опциями и со сторонними патчами. Это в принципе не сложно, но вдруг что-то не склеится, а система в постоянном использовании, огребу я по самую макушку за свою инициативу. Поэтому серверы не обновляю, хоть понимаю, что это не правильно. Руководство развивать систему не желает, собирается всё переводить на CISCO и Windows.Могу сказать Debian - это надёжная система ПРОМЫШЛЕННОГО уровня, постоянно обновляющаяся без риска что-то поломать. При обновлениях обеспечивается минимальное время отсутствия сервиса - несколько секунд для демонов, минута-две на обновление ядра. При обновлении ничего не компилируется, а значит не тормозит и поэтому обновление не мешает клиентам. Установка новых демонов и программ тоже простая и очень быстрая. Пока у Вас один сервер, разница во времени обслуживания не существенная, но если у Вас будет серверов 20 - на FreeBSD Вы будете тратить всё доступное время, а с Debian у Вас всё будет работать, планово обновляться, установка новой программы не потребует больших временнЫх ресурсов. </li><li class=comment><em>mult, 2008-03-03T16:23:48:<em> интересный пост.правда не написано про пересборку ядра и мира, про обновление портов...а на счет безопасного фтп, в самом деле, scp, рулит в этом плане.и еще, переход на freebsd 7.0 планируется? и каким образом, если планируется. </li><li class=comment><em>Иван Блинков, 2008-03-02T16:53:05:<em> [quote comment="308"]интересный пост.правда не написано про пересборку ядра и мира, про обновление портов...[/quote]Пересборка ядра там вкратце упоминалась, дело тривиальное, не стал на этом останавливаться, а "мира" там вообще нет, это вам не Gentoo :) .А вообще при установке системы обычно обновление некритично: впервые скачав порты, можно быть уверенным, что они "свежие".[quote comment="308"]и еще, переход на freebsd 7.0 планируется? и каким образом, если планируется.[/quote]Нельзя назвать этот процесс крайне необходимым, какой-либо причины срочно это делать пока не вижу. Заняться нечем будет - может быть обновлю, а так скорее всего до каких-либо кардинальных изменений, связанных, например, с переходом на кластер не буду саму ОС трогать. </li><li class=comment><em>Иван Блинков, 2008-03-02T16:53:02:<em> [quote comment="308"]интересный пост.правда не написано про пересборку ядра и мира, про обновление портов...[/quote]Пересборка ядра там вкратце упоминалась, дело тривиальное, не стал на этом останавливаться, а "мира" там вообще нет, это вам не Gentoo :) .А вообще при установке системы обычно обновление некритично: впервые скачав порты, можно быть уверенным, что они "свежие".[quote comment="308"]и еще, переход на freebsd 7.0 планируется? и каким образом, если планируется.[/quote]Нельзя назвать этот процесс крайне необходимым, какой-либо причины срочно это делать пока не вижу. Заняться нечем будет - может быть обновлю, а так скорее всего до каких-либо кардинальных изменений, связанных, например, с переходом на кластер не буду саму ОС трогать. </li><li class=comment><em>mult, 2008-03-02T16:23:29:<em> интересный пост.правда не написано про пересборку ядра и мира, про обновление портов...а на счет безопасного фтп, в самом деле, scp, рулит в этом плане.и еще, переход на freebsd 7.0 планируется? и каким образом, если планируется. </li><li class=comment><em>Иван Блинков, 2008-02-19T22:12:40:<em> [quote comment="228"]Этот путь смахивает на извращение %)[/quote]Возможно конечно, но не так уж это и много лишних телодвижений надо для прочтения man ssh для обнаружения параметров, необходимых для открытия туннеля для ftp.[quote comment="228"]А уж если ты сам -- единственный пользователь своего сервера, то никаких ftp и не надо.[/quote]Во-первых там нету ни слова о том, что я являюсь его владельцем, но эт неважно. А тот факт, что пароли знаю только я, чисто теоретически может в перспективе и измениться, так что спорный это все вопрос... </li><li class=comment><em>Иван Блинков, 2008-02-19T22:12:36:<em> [quote comment="228"]Этот путь смахивает на извращение %)[/quote]Возможно конечно, но не так уж это и много лишних телодвижений надо для прочтения man ssh для обнаружения параметров, необходимых для открытия туннеля для ftp.[quote comment="228"]А уж если ты сам -- единственный пользователь своего сервера, то никаких ftp и не надо.[/quote]Во-первых там нету ни слова о том, что я являюсь его владельцем, но эт неважно. А тот факт, что пароли знаю только я, чисто теоретически может в перспективе и измениться, так что спорный это все вопрос... </li><li class=comment><em>Владимир Бредников, 2008-02-19T20:37:21:<em> > Но при потенциальной возможности работы через Интернет, этот протокол> является достаточно уязвимым, так как не использует никакого шифрования.> Эта проблема решается с помощью механизма FTP over SSH, который> представляет собой использование SSH в роли туннеля для передачи> файлов по FTP.Этот путь смахивает на извращение %) Для безопасной передачи файлов есть scp и sftp, встроенные в ssh, исключающие всякую необходимость устанавливать дополнительные потенциально дырявые сервисы. Клиентов, не считая нативного scp, существует довольно много, а если какая-нибудь программа разработки этот scp не поддерживает, то можно смонтировать каталог на сервере как раздел своей ФС. Единственный минус, на мой взгляд -- ограничить пользователя его личным каталогом несколько нетривиально, но все-таки возможно. А уж если ты сам -- единственный пользователь своего сервера, то никаких ftp и не надо. </li><li class=comment><em>Владимир Бредников, 2008-02-19T20:37:03:<em> > Но при потенциальной возможности работы через Интернет, этот протокол> является достаточно уязвимым, так как не использует никакого шифрования.> Эта проблема решается с помощью механизма FTP over SSH, который> представляет собой использование SSH в роли туннеля для передачи> файлов по FTP.Этот путь смахивает на извращение %) Для безопасной передачи файлов есть scp и sftp, встроенные в ssh, исключающие всякую необходимость устанавливать дополнительные потенциально дырявые сервисы. Клиентов, не считая нативного scp, существует довольно много, а если какая-нибудь программа разработки этот scp не поддерживает, то можно смонтировать каталог на сервере как раздел своей ФС. Единственный минус, на мой взгляд -- ограничить пользователя его личным каталогом несколько нетривиально, но все-таки возможно. А уж если ты сам -- единственный пользователь своего сервера, то никаких ftp и не надо. </li><li class=comment><em>Иван Блинков, 2008-02-15T07:50:56:<em> [quote comment="170"]-Solaris отнюдь не отличается скромной документацией[/quote]Значит видимо я плохо искал, по крайней мере детального мануала, сравнимого с Gentoo или FreeBSD Handbook'ами или хотябы wiki приличной я не нашел, что правда не говорит о том, что эта документация не существует.[quote comment="170"]-"конструктор для сбора системы именно таким образом, как было бы удобно мне, а не разработчикам дистрибутива" - не очень понятно что имелось ввиду, т.к. есть "голые" дистрибутивы Linux, в том числе большинство серверных.Так же непонятно какое именно "конструирование" системы было проведено, если это только установка указанного в статье ПО, то тем более странная аргументация.В статье упущена так же такая важная и интересная часть установки, как Security Tuning :) В ее свете, к стати, установка ПО из пакетов смотрится не очень, т.к. в готовых сборках чаще всего присутствует не нужный и/или небезопасный функционал, который часто можно убрать при ручной сборке.[/quote]Ну собственно говоря примерно то, что Вы описываете во втором процитированном мной абзаце, я и подразумевал под "конструированием": иметь возможность контролировать процесс сборки и установки ПО, в свете добавления и исключения того или иного функционала, при этом пользуясь все же штатными средствами системы, а не ручной сборкой из исходников.[quote comment="170"]И, к стати, вопрос: у имеющейся конфигурации 2 сетевых адаптера, а описано использование только одного - настраивать второй адаптер на балансировку нагрузки/резервирование планируется к запуску? Тот же вопрос по средствам мониторинга, бэкапу, настройке обновлений и т.д.[/quote]Тут на самом деле все упирается в финансирование, в любом случае планируется, вопрос только в том - к запуску ли это будет или позже?...Как до этого дело дойдет - будет хороший повод написать еще один подобный пост :) </li><li class=comment><em>Иван Блинков, 2008-02-15T07:50:08:<em> [quote comment="170"]-Solaris отнюдь не отличается скромной документацией[/quote]Значит видимо я плохо искал, по крайней мере детального мануала, сравнимого с Gentoo или FreeBSD Handbook'ами или хотябы wiki приличной я не нашел, что правда не говорит о том, что эта документация не существует.[quote comment="170"]-"конструктор для сбора системы именно таким образом, как было бы удобно мне, а не разработчикам дистрибутива" - не очень понятно что имелось ввиду, т.к. есть "голые" дистрибутивы Linux, в том числе большинство серверных.Так же непонятно какое именно "конструирование" системы было проведено, если это только установка указанного в статье ПО, то тем более странная аргументация.В статье упущена так же такая важная и интересная часть установки, как Security Tuning :) В ее свете, к стати, установка ПО из пакетов смотрится не очень, т.к. в готовых сборках чаще всего присутствует не нужный и/или небезопасный функционал, который часто можно убрать при ручной сборке.[/quote]Ну собственно говоря примерно то, что Вы описываете во втором процитированном мной абзаце, я и подразумевал под "конструированием": иметь возможность контролировать процесс сборки и установки ПО, в свете добавления и исключения того или иного функционала, при этом пользуясь все же штатными средствами системы, а не ручной сборкой из исходников.[quote comment="170"]И, к стати, вопрос: у имеющейся конфигурации 2 сетевых адаптера, а описано использование только одного - настраивать второй адаптер на балансировку нагрузки/резервирование планируется к запуску? Тот же вопрос по средствам мониторинга, бэкапу, настройке обновлений и т.д.[/quote]Тут на самом деле все упирается в финансирование, в любом случае планируется, вопрос только в том - к запуску ли это будет или позже?...Как до этого дело дойдет - будет хороший повод написать еще один подобный пост :) </li><li class=comment><em>SergeySilaev, 2008-02-15T00:43:56:<em> По поводу выбора ОС и ПО - достаточно спорная аргументация, если чесно:-Solaris отнюдь не отличается скромной документацией,-"конструктор для сбора системы именно таким образом, как было бы удобно мне, а не разработчикам дистрибутива" - не очень понятно что имелось ввиду, т.к. есть "голые" дистрибутивы Linux, в том числе большинство серверных.Так же непонятно какое именно "конструирование" системы было проведено, если это только установка указанного в статье ПО, то тем более странная аргументация.В статье упущена так же такая важная и интересная часть установки, как Security Tuning :) В ее свете, к стати, установка ПО из пакетов смотрится не очень, т.к. в готовых сборках чаще всего присутствует не нужный и/или небезопасный функционал, который часто можно убрать при ручной сборке.Хотя все эти замечания, в общем, не принципиальны.И, к стати, вопрос: у имеющейся конфигурации 2 сетевых адаптера, а описано использование только одного - настраивать второй адаптер на балансировку нагрузки/резервирование планируется к запуску? Тот же вопрос по средствам мониторинга, бэкапу, настройке обновлений и т.д. </li><li class=comment><em>SergeySilaev, 2008-02-15T00:43:14:<em> По поводу выбора ОС и ПО - достаточно спорная аргументация, если чесно:-Solaris отнюдь не отличается скромной документацией,-"конструктор для сбора системы именно таким образом, как было бы удобно мне, а не разработчикам дистрибутива" - не очень понятно что имелось ввиду, т.к. есть "голые" дистрибутивы Linux, в том числе большинство серверных.Так же непонятно какое именно "конструирование" системы было проведено, если это только установка указанного в статье ПО, то тем более странная аргументация.В статье упущена так же такая важная и интересная часть установки, как Security Tuning :) В ее свете, к стати, установка ПО из пакетов смотрится не очень, т.к. в готовых сборках чаще всего присутствует не нужный и/или небезопасный функционал, который часто можно убрать при ручной сборке.Хотя все эти замечания, в общем, не принципиальны.И, к стати, вопрос: у имеющейся конфигурации 2 сетевых адаптера, а описано использование только одного - настраивать второй адаптер на балансировку нагрузки/резервирование планируется к запуску? Тот же вопрос по средствам мониторинга, бэкапу, настройке обновлений и т.д. </li><li class=comment><em>Иван Блинков, 2008-02-14T20:34:56:<em> [quote comment="168"]где если не секрет сервак держишь и что за канал и главное почем? Смотрел цены на установку своего сервера на паркинг но чот дороговато.[/quote]Мое дело маленькое - настроить и впоследствии держать в работающем состоянии, ну и собственно разработка веб-приложения, а остальными организационными вопросами заказчик занимается. Хоть я и в курсе ответов на эти вопросы - это не в моей компетенции открыто приводить названия и цифры.А насчет цен на colocation - в большинстве случаев они вполне оправданны, так как своими силами подобные условия организовывать обойдется в большие суммы (в большинстве случаев). </li><li class=comment><em>HodzaNassredin, 2008-02-14T19:44:45:<em> Прикольно. Тоже ща думаю заняться таким же делом. Вот сразу и вопрос: где если не секрет сервак держишь и что за канал и главное почем? Смотрел цены на установку своего сервера на паркинг но чот дороговато. </li><li class=comment><em>HodzaNassredin, 2008-02-14T19:44:20:<em> Прикольно. Тоже ща думаю заняться таким же делом. Вот сразу и вопрос: где если не секрет сервак держишь и что за канал и главное почем? Смотрел цены на установку своего сервера на паркинг но чот дороговато. </li><li class=comment><em>Gorky, 2008-02-14T15:08:49:<em> Супер! Записи в Вашем блоге с каждым разом все интересней и интересней! Спасибо :) </li><li class=comment><em>Gorky, 2008-02-14T15:08:40:<em> Супер! Записи в Вашем блоге с каждым разом все интересней и интересней! Спасибо :) </li></ul></div><script type=text/javascript>
        var disqus_shortname = 'insight-it';
        var disqus_identifier = '39 http://www.insight-it.ru/unix-way/unix/veb-server-za-dva-vechera/';
        var disqus_url = 'https://www.insight-it.ru/linux/2008/web-server-za-dva-vechera/';
        var disqus_domain = 'disqus.com';
        var disqus_title = 'Веб-сервер за два вечера';
        var disqus_container_id = 'comments';
        (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//insight-it.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script></div></div><div class="col hide-on-small-only m3 l2"><div class=card><a href=https://www.insight-it.ru/author><div class="card-image tooltipped" data-position=top data-delay=50 data-tooltip="Автор Insight IT"><img src=https://www.insight-it.ru/images/avatar.jpeg><span class=card-title>Иван Блинков</span></div></a></div><div class=toc-wrapper><div style="height: 1px;"><ul class="section table-of-contents"><li><a href=# title="Веб-сервер за два вечера">Веб-сервер за два вечера</a><li><a href=#predistoriia title=Предистория>Предистория</a></li><li><a href=#den-pervyi title="День первый">День первый</a></li><li><a href=#den-vtoroi title="День второй">День второй</a></li><li><a href=#zakliuchenie title=Заключение>Заключение</a></li></li></ul></div></div></div></div></div></main><footer class=page-footer><div id=footer class=container><div class=row><div class="col m4 s12"><h5 class=white-text>Иван Блинков</h5><ul><li><a href=mailto:insight-it@blinkov.ru rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-mail white-text"></i> insight-it@blinkov.ru </span></a></li><li><a href=https://www.linkedin.com/in/ivanblinkov rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-linkedin light-blue-text text-darken-3"></i> LinkedIn </span></a></li><li><a href=https://twitter.com/blinkov rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-twitter cyan-text text-accent-2"></i> @blinkov </span></a></li><li><a href="http://plus.google.com/102882395551389724078?rel=author" rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-gplus red-text"></i> Google </span></a></li><li><a href=https://www.facebook.com/ivan.blinkov rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-facebook blue-text text-darken-3"></i> Facebook </span></a></li><li><a href=https://www.insight-it.ru/feed/ rel=nofollow><span class="light-blue-text text-lighten-4"><i class="icon-rss orange-text"></i> Подписаться по RSS </span></a></li></ul><a href=//feeds.feedburner.com/insight-it/feed target=_blank rel="external nofollow"><img src="//feeds.feedburner.com/~fc/insight-it/feed?bg=b3e5fc&amp;fg=222222&amp;anim=1" height=26 width=88></a>&nbsp;<a href=//twitter.com/blinkov target=_blank rel="external nofollow"><img src=//button.twittercounter.com/animated/blinkov/222222/b3e5fc width=88 height=26></a></div><div class="col m4 s12"><h5 class=white-text>Рубрики</h5><ul><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/highload/ > Высокие нагрузки </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/interactive/ > Интерактивные сайты </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/linux/ > Linux </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/python/ > Python </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/erlang/ > Erlang </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/storage/ > Хранение данных </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/frontend/ > Frontend </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/theory/ > Теория </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/event/ > Мероприятия </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/misc/ > Разное </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/php/ > PHP </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/security/ > Безопасность </a></li><li><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/category/vacancy/ > Вакансии </a></li></ul><h5 class=white-text>Навигация</h5><ul><li class><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/blog/ >Блог</a></li><li class><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/about/ >О&nbsp;сайте</a></li><li class><a rel=nofollow class="grey-text text-lighten-4" href=https://www.insight-it.ru/author/ >Об&nbsp;авторе</a></li></ul></div><div class="col m4 s12"><h5 class="white-text center-align">Теги</h5><div class="tagcloud taglist"><span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/programmirovanie/ > Программирование </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/meropriiatiia/ > мероприятия </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/masshtabiruemost/ > Масштабируемость </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/apache/ > Apache </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/informatsionnye-tekhnologii/ > информационные технологии </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/memcached/ > Memcached </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/internet/ > интернет </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/google/ > Google </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/mysql/ > MySQL </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/c/ > C++ </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/arkhitektura/ > архитектура </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/hbase/ > HBase </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/tekhnologiia/ > технология </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/python/ > Python </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/javascript/ > JavaScript </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/oop/ > ООП </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/nginx/ > nginx </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/facebook/ > Facebook </a></span>&ensp;<span class="tag light-blue lighten-2 tag-4"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/highload/ > highload </a></span>&ensp;<span class="tag light-blue lighten-2 tag-2"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/php/ > PHP </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/razrabotka/ > разработка </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/hadoop/ > Hadoop </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/online/ > online </a></span>&ensp;<span class="tag light-blue lighten-2 tag-1"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/linux/ > Linux </a></span>&ensp;<span class="tag light-blue lighten-2 tag-3"><a rel=nofollow class=white-text href=https://www.insight-it.ru/tag/java/ > Java </a></span>&ensp;</div></div></div></div><div class=footer-copyright><div class=container> © Insight IT, 2008-2015 <a class="license right tooltipped" rel="license nofollow" target=_blank href=http://creativecommons.org/licenses/by-nc-nd/4.0/ data-position=top data-delay=50 data-tooltip="Все материалы опубликованы под лицензией Creative Commons Attribution-NonCommercial-NoDerivatives 4.0"><img alt="Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License" src=https://www.insight-it.ru/theme/images/license.png></a></div></div></footer><script src=//code.jquery.com/jquery-2.1.1.min.js></script><script src=https://www.insight-it.ru/theme/js/main.js?b5bb290d></script><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js ','ga');
ga('create', 'UA-3403373-1', 'auto');
ga('send', 'pageview');
</script><script type=text/javascript>(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter30650472 = new Ya.Metrika({id:30650472, webvisor:true, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src=//mc.yandex.ru/watch/30650472 style="position:absolute; left:-9999px;" alt></div></noscript></body></html>